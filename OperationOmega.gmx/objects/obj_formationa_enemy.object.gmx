<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_formation</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prnt_enemyenergy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sfx_play(snd_formation, x, y);
//Set speed
speed = 12*global.framerate;
amplified = 0;

image_speed = 0
image_index = 0;
if(global.allycolor = c_red)
    image_index = 1;
    
alarm[4] = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(global.allycolor != c_red)
    part_type_color3(obj_partsystem.formsplit,c_white,c_red,c_red);
else
    part_type_color3(obj_partsystem.formsplit,16777215,16711680,16711680);    
part_type_direction(obj_partsystem.formsplit, direction-1, direction+1, 0, 0);
part_type_orientation(obj_partsystem.formsplit,direction,direction,0,0,0);
repeat(10)
    part_particles_create(obj_partsystem.system, x-15+random(30), y-15+random(30), obj_partsystem.formsplit, 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>203</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_kill_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Move towards the target if it still exists
if(instance_exists(target))
 direction = point_direction(x, y, target.x, target.y);
if(global.allycolor != c_red)
    part_type_color3(obj_partsystem.formsplit,c_white,c_red,c_red);
else
    part_type_color3(obj_partsystem.formsplit,16777215,16711680,16711680);    
part_type_direction(obj_partsystem.formsplit, direction-1, direction+1, 0, 0);
part_type_orientation(obj_partsystem.formsplit,direction,direction,0,0,0);
repeat(10)
    part_particles_create(obj_partsystem.system, x-15+random(30), y-15+random(30), obj_partsystem.formsplit, 1);
sfx_play(snd_formation, x, y);
bullet_create(x, y, "Formation", direction, mid, 0);
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Check if the target point has been reached, and check if the shot is
//moving to prevent error
if(speed = 0 || targetx = -3000) exit;
if(point_distance(x, y, targetx, targety) &lt;= 10)
{
 //Stop moving
 speed = 0;
 //Create an effect
 if(global.fbursteffect = 1)
  part_particles_create(obj_partsystem.system, x, y, obj_partsystem.formsplit, 6);
 //Create smaller shots. Give them their direction. Give them a branch number.
 //Keep track of this instance in them. Set the time until they attack.
 form = instance_create(x, y, obj_formationb_enemy);
        form.priority = 1;
 form.direction = 0;
 form.image_angle = form.direction;
 form.part = 1;
 form.location = 1;
 form.control = id;
 form.alarm[1] = 135/global.framerate/(amplified+1);
 form.mid = mid;
 form.amplified = amplified;
 form = instance_create(x, y, obj_formationb_enemy);
 form.direction = 90;
 form.image_angle = form.direction;
 form.part = 1;
 form.location = 2;
 form.control = id;
 form.alarm[1] = 135/global.framerate/(amplified+1);
 form.mid = mid;
 form.amplified = amplified;
 form = instance_create(x, y, obj_formationb_enemy);
 form.direction = 180;
 form.image_angle = form.direction;
 form.part = 1;
 form.location = 3;
 form.control = id;
 form.alarm[1] = 135/global.framerate/(amplified+1);
 form.mid = mid;
 form.amplified = amplified;
 form = instance_create(x, y, obj_formationb_enemy);
 form.direction = 270;
 form.image_angle = form.direction;
 form.part = 1; 
 form.location = 4;
 form.control = id;
 form.alarm[1] = 135/global.framerate/(amplified+1);
 form.mid = mid;
 form.amplified = amplified;
 //Set mask to empty to prevent error due to collision
 mask_index = spr_empty;
 //Set time until attack
 alarm[1] = 180/global.framerate/(amplified+1);
}
if(x &lt; 0 || x &gt; room_width || y &lt; 0 || y &gt; room_height)
{
 instance_destroy();
 exit;
}
if(obj_bulletcontrol.wallposition[floor(x/32), floor(y/32)] = true)
 instance_destroy();

 
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>8,8</point>
    <point>8,8</point>
  </PhysicsShapePoints>
</object>
